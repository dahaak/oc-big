<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="OC-Big : Automatically exported from code.google.com/p/oc-big">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>OC-Big</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/idmteam/oc-big">View on GitHub</a>

          <h1 id="project_title">OC-Big</h1>
          <h2 id="project_tagline">Automatically exported from code.google.com/p/oc-big</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/idmteam/oc-big/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/idmteam/oc-big/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><strong>OC-Big</strong> is an open source software extension for the electronic data capture system <em>!OpenClinica</em> (<a href="https://www.openclinica.com/">https://www.openclinica.com/</a>) and has been developed at the Department of Medical Informatics, Uniklinik RWTH Aachen, Germany. OC-Big aims at enriching !OpenClinica by a new module for convenient and context-related data integration of large volume files into electronic case report forms (eCRFs). OC-Big is developed using !JavaScript (JQuery) and PHP, and is based on other open source projects, namely jQuery File Upload (<a href="http://blueimp.github.io/jQuery-File-Upload/">http://blueimp.github.io/jQuery-File-Upload/</a>) and zip.js (<a href="http://gildas-lormeau.github.io/zip.js/">http://gildas-lormeau.github.io/zip.js/</a>).</p>

<h1>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h1>

<ul>
<li>Upload of large volume date (only limited by server’s storage space)</li>
<li>Chunking of data files into multiple parts to exceed browser’s upload limit of 4 GB</li>
<li>Support of multiple selection of files and queue processing</li>
<li>User-friendly drag &amp; drop support</li>
<li>Data storage with unique filenames including study, event and subject context</li>
<li>Automatic compression and decompression for transfer (optional)</li>
<li>Not affected by !OpenClinica’s session timeout</li>
<li>Easy to integrate in and configure through eCRFs</li>
</ul>

<h1>
<a id="installation-guide" class="anchor" href="#installation-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation Guide</h1>

<h2>
<a id="system-requirements" class="anchor" href="#system-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>System Requirements</h2>

<p>The following system requirements represent the system configuration of our server. In general, it should also work with similar components.</p>

<ul>
<li>Web server (e.g. Debian GNU/Linux 6.0)</li>
<li>!OpenClinica 3.1.2 with requirements, e.g. PostreSQL, Tomcat (probably newer !OpenClinica versions also working, but not tested yet)</li>
<li>Apache 2</li>
<li>PHP 5 (with PECL Zip 1.10.2)</li>
<li>Apache Tomcat Connector (mod_jk)</li>
<li>Web browser, tested with Firefox &gt;19 and Google Chrome &gt;26 (Last tested: Firefox 34.0.5, Chrome 39.0.2171.95m)</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p><em>1. Install !OpenClinica</em></p>

<p>If not already done, install !OpenClinica with all requirements. Installation guides for Linux/Windows can be found here <a href="https://docs.openclinica.com/installation">https://docs.openclinica.com/installation</a>. The following manual is based on a Linux (Debian) installation of !OpenClinica.</p>

<p><em>2. Install Apache</em></p>

<p>Pointing the web browser to http://localhost/ takes us to the default apache page confirming that apache has been installed. If not, the command </p>

<p>{{{aptitude install apache2}}} </p>

<p>will catch apache2 from the debian packages and install it. </p>

<p><em>3. Install Apache Tomcat Connector</em></p>

<p>Apache has to communicate with Tomcat. For this, the Apache Tomcat Connector has to be installed and its <em>jk.conf</em> file edited. A manual can be found here: <a href="http://tomcat.apache.org/connectors-doc/">http://tomcat.apache.org/connectors-doc/</a>.</p>

<p><em>4. Install PHP</em></p>

<p>PHP5 is required for OC-Big to process transferred files on server side. This can be installed along with the php apache module by</p>

<p>{{{aptitude install php5 libapache2-mod-php5}}}</p>

<p>After this, a server restart must be done</p>

<p>{{{/etc/init.d/apache2 restart}}} </p>

<p><em>5. Install PHP Zip Extension</em></p>

<p>Zip functionality is not usually enabled with standard php installations. To check if the zip functionality is enabled, the <em>phpinfo()</em> function can be used. PHP's zip functionality has to be enabled by </p>

<p># compiling php with the <em>--enable-zip</em> option OR 
 # install it via PECL, e.g. install PECL, modify the <em>php.ini</em> file and uncomment zip.so. </p>

<p><em>6. Extract oc-big-111.zip to a temporary folder</em></p>

<p>The zip file contains the directories</p>

<ul>
<li>bin: PHP modules</li>
<li>css: Cascading Style Sheets (CSS) files for design</li>
<li>images: Images used in user interface</li>
<li>js: Used Javascript libraries</li>
<li>lib: Original source code of used projects and libraries</li>
<li>openclinica: !OpenClinica files including <em>OC-Big.xls</em> as demo eCRF</li>
<li>server: Server side PHP code to process transferred files</li>
<li>templates: HTML templates for client side</li>
</ul>

<p><em>7. Copy contents on server</em></p>

<p>Copy the complete content of oc-big-111.zip into a folder in your Apache's default document root directory (e.g /var/www/oc-big-111/).</p>

<p><em>8. Configure mod_jk</em></p>

<p>Add your oc-big-111 folder to the <em>jk.conf</em> file of mod_jk with the following statement:</p>

<p>{{{JkUnMount /oc-big-111/* ajp13_worker}}}</p>

<p>After this, restart apache again:</p>

<p>{{{/etc/init.d/apache2 restart}}} </p>

<p><em>8. Set folder permissions</em></p>

<p>In the directories /server/php/ and /mnt/data/openclinica/ the transferred files are stored, so these directories need write permissions (777).</p>

<p><em>9. Copy Pop-Up call script into your !OpenClinica Tomcat folder</em></p>

<p>The script /openclinica/showImageUpload.js has to be copied into your !OpenClinica Tomcat folder. After a backup, create a folder (e.g. /javascripts/) inside the !OpenClinica webapp folder and copy the script file here. This script has to be available inside Tomcat, because it is called from !OpenClinica itself.</p>

<p><em>10. Customize eCRF</em></p>

<p>Open the /openclinica/OC-Big.xls sample eCRF and modify it. Here a sample integration for image upload into the eCRF is already available. An overview of the parameters, which can be generally set in the eCRF is given below.</p>

<p><em>11. Install eCRF</em></p>

<p>Install the eCRF as usual in !OpenClinica.</p>

<p><em>12. Ready!</em></p>

<h2>
<a id="settings" class="anchor" href="#settings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Settings</h2>

<p>OC-Big can be configured directly in the eCRF by modification of the upload button tag. In the sample eCRF it is as follows:</p>

<p><code>&lt;span class="uploadButton" widthQ="240px" fileType="png" fileCount="1" imgWidth="240px" imgFloat="right" imgDefault="/openclinica/crfImages/default.png" apacheBD="oc-big-111" savePath="//mnt/data/openclinica/"  token="test1234!"/&gt;</code></p>

<p>You can modify the following parameters to adapt OC-Big to your needs:</p>

<ul>
<li>
<em>fileType:</em> Allowed file types for upload. Multiple types can be seperated by comma (e.g. jpg, png). <em>Note:</em> On changing this you currently also have to adapt the <em>content-type</em> in the <em>download.php</em> file to get downloads working as well.</li>
<li>
<em>fileCount:</em> Maximum number of allows files.<br>
</li>
<li>
<em>imgDefault:</em> Location of default image showed in the eCRF beside of the OC-Big button.</li>
<li>
<em>apacheBD:</em> Name of the OC-Big instance, which is used. If your OC-Big code is in a folder named "oc-big-111" (as described in the manual), "oc-big-111" has to be set here.</li>
<li>
<em>savePath:</em> Path where transferred files are finally stored. <em>Note:</em> On changing this you currently also have to adapt the <em>savePath</em> in <em>settings.php</em> and (perhaps) the extraction of the filenames in <em>download.php</em>.</li>
<li>
<em>token:</em> Token to avoid calls of OC-Big from outside the eCRF. The token value in the eCRF and in <em>settings.php</em> have to be the same. The longer this value, the lower the risk of unwanted OC-Big calls from outside. <em>Note:</em> Please change the token value before integration. </li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">OC-Big maintained by <a href="https://github.com/idmteam">idmteam</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
